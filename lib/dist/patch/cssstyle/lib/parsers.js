"use strict";exports.TYPES={INTEGER:1,NUMBER:2,LENGTH:3,PERCENT:4,URL:5,COLOR:6,STRING:7,ANGLE:8,KEYWORD:9,NULL_OR_EMPTY_STR:10};var integerRegEx=/^[\-+]?[0-9]+$/,numberRegEx=/^[\-+]?[0-9]*\.[0-9]+$/,lengthRegEx=/^(0|[\-+]?[0-9]*\.?[0-9]+(in|cm|em|mm|pt|pc|px))$/,percentRegEx=/^[\-+]?[0-9]*\.?[0-9]+%$/,urlRegEx=/^url\(\s*([^\)]*)\s*\)$/,stringRegEx=/^(\"[^\"]*\"|\'[^\']*\')$/,colorRegEx1=/^#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])?$/,colorRegEx2=/^rgb\(([^\)]*)\)$/,colorRegEx3=/^rgba\(([^\)]*)\)$/,angleRegEx=/^([\-+]?[0-9]*\.?[0-9]+)(deg|grad|rad)$/;exports.valueType=function(e){if(""===e||null===e)return exports.TYPES.NULL_OR_EMPTY_STR;if("number"==typeof e&&(e=e.toString()),"string"==typeof e){if(integerRegEx.test(e))return exports.TYPES.INTEGER;if(numberRegEx.test(e))return exports.TYPES.NUMBER;if(lengthRegEx.test(e))return exports.TYPES.LENGTH;if(percentRegEx.test(e))return exports.TYPES.PERCENT;if(urlRegEx.test(e))return exports.TYPES.URL;if(stringRegEx.test(e))return exports.TYPES.STRING;if(angleRegEx.test(e))return exports.TYPES.ANGLE;if(colorRegEx1.test(e))return exports.TYPES.COLOR;var t,r=colorRegEx2.exec(e);if(null===r)if(r=colorRegEx3.exec(e),null===r)switch(e=e.toLowerCase()){case"maroon":case"red":case"orange":case"yellow":case"olive":case"purple":case"fuchsia":case"white":case"lime":case"green":case"navy":case"blue":case"aqua":case"teal":case"black":case"silver":case"gray":case"activeborder":case"activecaption":case"appworkspace":case"background":case"buttonface":case"buttonhighlight":case"buttonshadow":case"buttontext":case"captiontext":case"graytext":case"highlight":case"highlighttext":case"inactiveborder":case"inactivecaption":case"inactivecaptiontext":case"infobackground":case"infotext":case"menu":case"menutext":case"scrollbar":case"threeddarkshadow":case"threedface":case"threedhighlight":case"threedlightshadow":case"threedshadow":case"window":case"windowframe":case"windowtext":return exports.TYPES.COLOR;default:return exports.TYPES.KEYWORD}else{if(t=r[1].split(/\s*,\s*/),4!==t.length)return;if((t.slice(0,3).every(percentRegEx.test.bind(percentRegEx))||t.every(integerRegEx.test.bind(integerRegEx)))&&numberRegEx.test(t[3]))return exports.TYPES.COLOR}else{if(t=r[1].split(/\s*,\s*/),3!==t.length)return;if(t.every(percentRegEx.test.bind(percentRegEx))||t.every(integerRegEx.test.bind(integerRegEx)))return exports.TYPES.COLOR}}},exports.parseInteger=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t===exports.TYPES.INTEGER)return String(parseInt(e,10))},exports.parseNumber=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t===exports.TYPES.NUMBER||t===exports.TYPES.INTEGER)return String(parseFloat(e))},exports.parseLength=function(e){if(0===e||"0"===e)return"0px";var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t===exports.TYPES.LENGTH)return e},exports.parsePercent=function(e){if(0===e||"0"===e)return"0%";var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t===exports.TYPES.PERCENT)return e},exports.parseMeasurement=function(e){var t=exports.parseLength(e);return void 0!==t?t:exports.parsePercent(e)},exports.parseUrl=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;var r=urlRegEx.exec(e);if(r){var s=r[1];if('"'!==s[0]&&"'"!==s[0]||s[0]===s[s.length-1]){'"'!==s[0]&&"'"!==s[0]||(s=s.substr(1,s.length-2));var a;for(a=0;a<s.length;a++)switch(s[a]){case"(":case")":case" ":case"\t":case"\n":case"'":case'"':return;case"\\":a++}return"url("+s+")"}}},exports.parseString=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t===exports.TYPES.STRING){var r;for(r=1;r<e.length-1;r++)switch(e[r]){case e[0]:return;case"\\":for(r++;r<e.length-1&&/[0-9A-Fa-f]/.test(e[r]);)r++}if(!(r>=e.length))return e}},exports.parseColor=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;var r,s,a,n,o=1,i=colorRegEx1.exec(e);if(i){var p=e.substr(1);return 3===p.length&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),r=parseInt(p.substr(0,2),16),s=parseInt(p.substr(2,2),16),a=parseInt(p.substr(4,2),16),"rgb("+r+", "+s+", "+a+")"}if(i=colorRegEx2.exec(e)){if(n=i[1].split(/\s*,\s*/),3!==n.length)return;if(n.every(percentRegEx.test.bind(percentRegEx)))r=Math.floor(255*parseFloat(n[0].slice(0,-1))/100),s=Math.floor(255*parseFloat(n[1].slice(0,-1))/100),a=Math.floor(255*parseFloat(n[2].slice(0,-1))/100);else{if(!n.every(integerRegEx.test.bind(integerRegEx)))return;r=parseInt(n[0],10),s=parseInt(n[1],10),a=parseInt(n[2],10)}return r=Math.min(255,Math.max(0,r)),s=Math.min(255,Math.max(0,s)),a=Math.min(255,Math.max(0,a)),"rgb("+r+", "+s+", "+a+")"}if(i=colorRegEx3.exec(e)){if(n=i[1].split(/\s*,\s*/),4!==n.length)return;if(n.slice(0,3).every(percentRegEx.test.bind(percentRegEx)))r=Math.floor(255*parseFloat(n[0].slice(0,-1))/100),s=Math.floor(255*parseFloat(n[1].slice(0,-1))/100),a=Math.floor(255*parseFloat(n[2].slice(0,-1))/100),o=parseFloat(n[3]);else{if(!n.slice(0,3).every(integerRegEx.test.bind(integerRegEx)))return;r=parseInt(n[0],10),s=parseInt(n[1],10),a=parseInt(n[2],10),o=parseFloat(n[3])}return isNaN(o)&&(o=1),r=Math.min(255,Math.max(0,r)),s=Math.min(255,Math.max(0,s)),a=Math.min(255,Math.max(0,a)),o=Math.min(1,Math.max(0,o)),1===o?"rgb("+r+", "+s+", "+a+")":"rgba("+r+", "+s+", "+a+", "+o+")"}return t===exports.TYPES.COLOR?e:void 0},exports.parseAngle=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t===exports.TYPES.ANGLE){var r=angleRegEx.exec(e),s=parseFloat(r[1]);for("rad"===r[2]?s*=180/Math.PI:"grad"===r[2]&&(s*=.9);s<0;)s+=360;for(;s>360;)s-=360;return s+"deg"}},exports.parseKeyword=function(e,t){var r=exports.valueType(e);if(r===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(r===exports.TYPES.KEYWORD){e=e.toString().toLowerCase();var s;for(s=0;s<t.length;s++)if(t[s].toLowerCase()===e)return t[s]}};var dashedToCamelCase=function(e){var t,r="",s=!1;for(t=0;t<e.length;t++)"-"!==e[t]?(r+=s?e[t].toUpperCase():e[t],s=!1):s=!0;return r};exports.dashedToCamelCase=dashedToCamelCase;var is_space=/\s/,opening_deliminators=['"',"'","("],closing_deliminators=['"',"'",")"],getParts=function(e){var t,r,s,a=[],n=e.length,o=[],i="";for(t=0;t<n;t++)r=opening_deliminators.indexOf(e[t]),s=closing_deliminators.indexOf(e[t]),is_space.test(e[t])?0===a.length?(""!==i&&o.push(i),i=""):i+=e[t]:"\\"===e[t]?(t++,i+=e[t]):(i+=e[t],s!==-1&&s===a[a.length-1]?a.pop():r!==-1&&a.push(r));return""!==i&&o.push(i),o};exports.shorthandParser=function(e,t){var r={},s=exports.valueType(e);if(s===exports.TYPES.NULL_OR_EMPTY_STR)return Object.keys(t).forEach(function(e){r[e]=""}),r;if("number"==typeof e&&(e=e.toString()),"string"==typeof e){if("inherit"===e.toLowerCase())return{};var a=getParts(e),n=!0;if(a.forEach(function(e){var s=!1;Object.keys(t).forEach(function(a){t[a].isValid(e)&&(s=!0,r[a]=e)}),n=n&&s}),n)return r}},exports.shorthandSetter=function(e,t){return function(r){var s=exports.shorthandParser(r,t);if(void 0!==s){Object.keys(s).forEach(function(e){var t=dashedToCamelCase(e);this[t]=s[e],s[e]=this[t],this.removeProperty(e),""!==s[e]&&(this._values[e]=s[e])},this),Object.keys(t).forEach(function(e){s.hasOwnProperty(e)||(this.removeProperty(e),delete this._values[e])},this),this.removeProperty(e);var a=exports.shorthandGetter(e,t).call(this);""!==a&&this._setProperty(e,a)}}},exports.shorthandGetter=function(e,t){return function(){return void 0!==this._values[e]?this.getPropertyValue(e):Object.keys(t).map(function(e){return this.getPropertyValue(e)},this).filter(function(e){return""!==e}).join(" ")}},exports.implicitSetter=function(e,t,r,s){t=t||"",""!==t&&(t="-"+t);var a=["top","right","bottom","left"];return function(n){if("number"==typeof n&&(n=n.toString()),"string"==typeof n){var o;if(o="inherit"===n.toLowerCase()||""===n?[n]:getParts(n),!(o.length<1||o.length>4)&&o.every(r)){o=o.map(function(e){return s(e)}),this._setProperty(e+t,o.join(" ")),1===o.length&&(o[1]=o[0]),2===o.length&&(o[2]=o[0]),3===o.length&&(o[3]=o[1]);for(var i=0;i<4;i++){var p=e+"-"+a[i]+t;this.removeProperty(p),""!==o[i]&&(this._values[p]=o[i])}return n}}}},exports.subImplicitSetter=function(e,t,r,s){var a=e+"-"+t,n=[e+"-top",e+"-right",e+"-bottom",e+"-left"];return function(t){if("number"==typeof t&&(t=t.toString()),"string"==typeof t&&r(t)){t=s(t),this._setProperty(a,t);for(var o=[],i=0;i<4&&(null!=this._values[n[i]]&&""!==this._values[n[i]]);i++)o.push(this._values[n[i]]);if(4===o.length){for(i=0;i<4;i++)this.removeProperty(n[i]),this._values[n[i]]=o[i];this._setProperty(e,o.join(" "))}return t}}};var camel_to_dashed=/[A-Z]/g,first_segment=/^\([^\-]\)-/,vendor_prefixes=["o","moz","ms","webkit"];exports.camelToDashed=function(e){var t,r=e.replace(camel_to_dashed,"-$&").toLowerCase();return t=r.match(first_segment),t&&vendor_prefixes.indexOf(t[1])!==-1&&(r="-"+r),r};