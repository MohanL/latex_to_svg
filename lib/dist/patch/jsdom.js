var PARSERS="jsdom/node_modules/cssstyle/lib/parsers.js";try{require(PARSERS)}catch(t){PARSERS="cssstyle/lib/parsers.js"}var subImplicitSetter=function(t,e,i,r){var n=t+"-"+e,a=[t+"-top",t+"-right",t+"-bottom",t+"-left"];return function(e){if("number"==typeof e&&(e=e.toString()),"string"==typeof e&&i(e)){e=r(e),this._setProperty(n,e);for(var s=[],o=0;o<4&&(null!=this._values[a[o]]&&""!==this._values[a[o]]);o++)s.push(this._values[a[o]]);if(4===s.length){for(o=0;o<4;o++)this.removeProperty(a[o]),this._values[a[o]]=s[o];this._setProperty(t,s.join(" "))}return e}}},PADDING=function(){var t=require(PARSERS),e=t.TYPES,i=function(i){var r=t.valueType(i);return r===e.LENGTH||r===e.PERCENT},r=function(e){return t.parseMeasurement(e)},n=t.implicitSetter("padding","",i,r),a=t.implicitSetter("padding","",function(){return!0},function(t){return t});return{definition:{set:function(t){if("number"==typeof t&&(t=String(t)),"string"==typeof t){var e=t.toLowerCase();switch(e){case"inherit":case"initial":case"unset":case"":a.call(this,e);break;default:n.call(this,t)}}},get:function(){return this.getPropertyValue("padding")},enumerable:!0,configurable:!0},isValid:i,parser:r}}(),MARGIN=function(){var t=require(PARSERS),e=t.TYPES,i=function(i){if("auto"===i.toLowerCase())return!0;var r=t.valueType(i);return r===e.LENGTH||r===e.PERCENT},r=function(e){var i=e.toLowerCase();return"auto"===i?i:t.parseMeasurement(e)},n=t.implicitSetter("margin","",i,r),a=t.implicitSetter("margin","",function(){return!0},function(t){return t});return{definition:{set:function(t){if("number"==typeof t&&(t=String(t)),"string"==typeof t){var e=t.toLowerCase();switch(e){case"inherit":case"initial":case"unset":case"":a.call(this,e);break;default:n.call(this,t)}}},get:function(){return this.getPropertyValue("margin")},enumerable:!0,configurable:!0},isValid:i,parser:r}}();exports.patch=function(t){var e=t(""),i=e.defaultView,r=e.createElement("div");if(r.style.border="1px solid black","1px solid black"!==r.style.border){var n=i.HTMLElement._init;i.HTMLElement._init=function(){n.apply(this,arguments);var t=this;this.style._onChange=function(e){t._settingCssText||(t._settingCssText=!0,t.setAttribute("style",e),t._settingCssText=!1)}}}if("nodeName"in i.Attr.prototype||Object.defineProperties(i.Attr.prototype,{nodeName:{get:function(){return this.name}}}),r.style.paddingTop="10px",r.style.padding="1px","1px"!==r.style.paddingTop){var a=require("jsdom/lib/jsdom/level1/core");Object.defineProperties(a.CSSStyleDeclaration.prototype,{padding:PADDING.definition,margin:MARGIN.definition})}if(r.style.padding="1px 2px 3px 4px",r.style.paddingTop="10px","10px 2px 3px 4px"!==r.style.padding){var a=require("jsdom/lib/jsdom/level1/core");Object.defineProperties(a.CSSStyleDeclaration.prototype,{marginTop:{set:subImplicitSetter("margin","top",MARGIN.isValid,MARGIN.parser),get:function(){return this.getPropertyValue("margin-top")}},marginRight:{set:subImplicitSetter("margin","right",MARGIN.isValid,MARGIN.parser),get:function(){return this.getPropertyValue("margin-right")}},marginBottom:{set:subImplicitSetter("margin","bottom",MARGIN.isValid,MARGIN.parser),get:function(){return this.getPropertyValue("margin-bottom")}},marginLeft:{set:subImplicitSetter("margin","left",MARGIN.isValid,MARGIN.parser),get:function(){return this.getPropertyValue("margin-left")}},paddingTop:{set:subImplicitSetter("padding","top",PADDING.isValid,PADDING.parser),get:function(){return this.getPropertyValue("padding-top")}},paddingRight:{set:subImplicitSetter("padding","right",PADDING.isValid,PADDING.parser),get:function(){return this.getPropertyValue("padding-right")}},paddingBottom:{set:subImplicitSetter("padding","bottom",PADDING.isValid,PADDING.parser),get:function(){return this.getPropertyValue("padding-bottom")}},paddingLeft:{set:subImplicitSetter("padding","left",PADDING.isValid,PADDING.parser),get:function(){return this.getPropertyValue("padding-left")}}})}};